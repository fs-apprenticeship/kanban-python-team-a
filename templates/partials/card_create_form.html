<form
    hx-post="/cards/create/"
    hx-target="#column-cards-{{ column.id }}"
    hx-swap="innerHTML"
    hx-on::after-request="
        document.getElementById('add-card-{{ column.id }}').innerHTML=
        '<button class=btn-add-card hx-get=/cards/create/?column_id={{ column.id }} hx-target=#add-card-{{ column.id }} hx-swap=innerHTML>+ Add a task</button>';
        htmx.process(document.getElementById(\'add-card-{{ column.id }}\'));
    ">

    {% csrf_token %}
    <input type="hidden" name="column_id" value="{{ column.id }}">

    <div style="display:flex; flex-direction:column; gap:0.5rem; padding:0.5rem 0;">
        <input
            type="text"
            name="title"
            placeholder="Task title..."
            style="padding:0.5rem; border:1px solid #ddd; border-radius:6px; font-family:inherit;"
            required
            autofocus>

        <textarea
            name="description"
            placeholder="Description (optional)"
            rows="2"
            style="padding:0.5rem; border:1px solid #ddd; border-radius:6px; resize:none; font-family:inherit;">
        </textarea>

        <div style="display:flex; gap:0.5rem;">
            <button type="submit"
                style="background:#2196f3; color:white; border:none; padding:0.4rem 1rem; border-radius:6px; cursor:pointer;">
                Add
            </button>
            <button type="button"
                onclick="document.getElementById('add-card-{{ column.id }}').innerHTML='+ Add a task'; htmx.process(document.getElementById('add-card-{{ column.id }}'));"
                style="background:none; border:none; color:#666; cursor:pointer; padding:0.4rem;">
                Cancel
            </button>
        </div>
    </div>
</form>